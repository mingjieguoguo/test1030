package com.twitter.inject.thrift.integration.basic

import com.twitter.finagle.ThriftMux
import com.twitter.inject.Injector
import com.twitter.inject.exceptions.PossiblyRetryable
import com.twitter.inject.thrift.modules.ThriftClientModule
import com.twitter.test.thriftscala.EchoService
import com.twitter.util.Future

object EchoThriftClientModule1 extends ThriftClientModule[EchoService[Future]] {
  override val label = "echo-service"
  override val dest = "flag!thrift-echo-service"

  protected override def configureThriftMuxClient(
    injector: Injector, 
    client: ThriftMux.Client): ThriftMux.Client = {
    client
      .withResponseClassifier(PossiblyRetryable.ResponseClassifier)
  }
}
